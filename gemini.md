# 项目指南：小红书宣传图批量生成器

## 项目目标
开发一个自动化脚本，能够根据输入的文本，批量生成符合小红书风格的宣传图片（1242x1660px）。核心流程是：将文本动态填充到HTML网页模板，然后使用Playwright进行截图。

## 技术栈与核心工具
- **主语言**: Python
- **浏览器自动化**: Playwright (必须使用)
- **主要交互工具**: Gemini CLI
- **图片处理**: Pillow (PIL) 库用于图片对比

## 参考图片说明
项目有4张参考图片，需要支持批量对比功能：
- `reference_1.png` - 第一种样式参考
- `reference_2.png` - 第二种样式参考  
- `reference_3.png` - 第三种样式参考
- `reference_4.png` - 第四种样式参考

## 当前任务：创建支持批量对比的测试框架

### 测试框架要求
1. **批量图片对比测试工具**：
   - 功能：能够批量比较多组生成图片与参考图片的视觉差异
   - 输入：支持指定参考图片目录和生成图片目录
   - 输出：为每对图片提供量化的相似度百分比，并生成差异报告
   - 要求：能处理4张参考图片的批量对比，输出详细的对比结果表格

2. **批量测试配置**：
   - 创建测试配置文件，明确4张参考图片对应的预期生成结果
   - 支持按序号或按样式类型进行图片匹配对比
   - 设置相似度阈值（如95%），低于阈值视为测试失败

3. **基础功能测试用例** (保存为 `test_batch.py`)：
   - 测试脚本是否能处理多个文本输入并生成对应数量的图片
   - 验证生成的图片数量与输入文本数量一致
   - 检查每张生成图片的尺寸和格式是否符合要求

4. **测试运行脚本**：
   - 创建一键运行批量对比测试的脚本
   - 测试完成后生成详细的对比报告（包括每张图片的相似度）
   - 支持选择性运行单个或全部参考图片的对比测试

## 开发原则
- **批量处理优先**：所有功能设计都要考虑支持批量操作
- **清晰的匹配逻辑**：确保生成图片与参考图片能正确对应
- **详细的报告输出**：测试结果要清晰显示每张图片的对比情况
- **容错处理**：当图片数量不匹配时要有合理的错误处理

## 文件结构要求# 小红书宣传图生成器 - 项目指南

## 项目目标
创建一个自动化脚本，能够批量生成小红书风格的宣传图片。

## 技术要求
1. 使用 Python 编写脚本
2. 使用 Playwright 进行网页截图
3. 图片尺寸：1242x1660像素
4. 支持批量处理多条文本

## 当前任务：创建测试框架
请先创建一个测试框架，包含：
1. 图片对比工具（比较生成图片和参考图片）
2. 基础功能测试
3. 测试运行脚本

## 参考图片
项目包含4张参考图片：
- reference_1.png
- reference_2.png  
- reference_3.png
- reference_4.png