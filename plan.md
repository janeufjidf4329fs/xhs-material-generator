# 小红书宣传图批量生成脚本开发计划

## 1. 项目概述

本项目旨在开发一个批量生成小红书宣传图的 Python 脚本。脚本将根据提供的文本内容，自动填充到预设的 HTML 模板中，并最终生成符合小红书尺寸（1242x1660px）的 PNG 图片。

## 2. 技术选型

- **编程语言**: Python
- **核心库**: Playwright (用于浏览器自动化和截图)
- **模板技术**: HTML/CSS

## 3. 开发阶段

### 阶段一：环境搭建与项目初始化 (1-2天)

- [ ] 安装 Python 3.x
- [ ] 初始化项目结构，创建 `src`, `tests`, `templates`, `output` 文件夹
- [ ] 使用 `pip` 安装 Playwright 及其浏览器依赖
- [ ] 初始化 Git 仓库，创建 `.gitignore` 文件
- [ ] 编写 `README.md`，包含项目简介和使用说明
- [ ] 创建 `dev_log.md` 用于记录开发过程中的重要决策

### 阶段二：HTML 模板设计与实现 (2-3天)

- [ ] 设计小红书图片的基本布局和样式 (HTML/CSS)
- [ ] 创建一个或多个 HTML 模板文件，存放于 `templates` 目录
- [ ] 在模板中预留文本占位符（例如，使用特殊的 ID 或 class）
- [ ] 编写一个简单的测试脚本，用于在浏览器中预览模板效果

### 阶段三：核心功能开发：文本填充与图片生成 (3-4天)

- [ ] **TDD 驱动**: 编写第一个测试，断言截图功能可以正常工作
- [ ] 使用 Playwright 加载本地 HTML 模板
- [ ] 实现将输入文本动态填充到 HTML 模板中占位符的功能
- [ ] 调用 Playwright 的截图功能，生成指定尺寸（1242x1660px）的 PNG 图片
- [ ] **TDD 驱动**: 编写测试，验证生成的图片尺寸和格式是否正确
- [ ] **对比参考图片**: 手动生成一张参考图片，用于后续迭代对比

### 阶段四：输入处理与命令行接口 (2-3天)

- [ ] 设计输入文本的格式（例如，纯文本文件，每行代表一个字段）
- [ ] 使用 Python 的 `argparse` 库创建命令行接口
- [ ] 实现接收文本文件路径或直接接收命令行文本作为输入
- [ ] 实现批量处理逻辑，为输入文件中的每一段文本生成一张图片
- [ ] **TDD 驱动**: 编写测试，验证命令行参数解析和文件读取功能

### 阶段五：测试与优化 (2-3天)

- [ ] 完善单元测试和集成测试，确保所有核心功能都被覆盖
- [ ] 对代码进行重构，提高可读性和可维护性
- [ ] 优化图片生成速度和资源消耗
- [ ] 确保所有代码都有清晰的注释

### 阶段六：文档与交付 (1天)

- [ ] 更新 `README.md`，提供详细的安装、配置和使用指南
- [ ] 清理代码，准备最终版本
- [ ] 将项目打包或提供清晰的运行指南

## 4. 测试策略

- 严格遵循 TDD（测试驱动开发）原则。
- 为每个新功能或修复的 bug 编写测试用例。
- 测试将覆盖：
    - 核心截图功能
    - 文本填充逻辑
    - 命令行参数处理
    - 文件输入/输出
- 每次迭代后，将生成的图片与参考图片进行视觉对比，确保样式和布局的正确性。

## 5. 开发日志

所有重要的技术决策、遇到的问题及其解决方案都将记录在 `dev_log.md` 文件中，以确保开发过程的可追溯性。
